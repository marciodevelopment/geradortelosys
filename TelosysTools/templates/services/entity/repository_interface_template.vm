package ${target.javaPackageFromFolder(${SRC})};

import java.util.*;
import org.springframework.data.*;
import java.io.Serializable;
import jakarta.persistence.*;
import jakarta.validation.constraints.*;
import br.org.curitiba.ici.saude.common.*;
import ${ROOT_PKG}.*;
import org.springframework.data.domain.*;
import org.springframework.data.jpa.repository.*;


#set($updateAttributes = [])
#set($existsSearch = false)

#foreach ($attribute in $entity.nonKeyAttributes)
    #if ($attribute.hasTag('web') && $attribute.tagValue('web').contains('pesquisa'))
     #set($existsSearch = true)
    #end
    #if ($attribute.hasTag('web') && $attribute.tagValue('web').contains('put'))
      #if ($updateAttributes.add($attribute))
      #end
    #end
#end



public interface ${entity.name}Repository
    extends JpaRepository<${entity.name}Entity, Integer>#if($existsSearch), SearchRepository<${entity.name}PesquisaView>#end {
#if ($existsSearch)
  @QuerySearch(columns = "colunasPesquisa", query = """
      from ${entity.name} e
      where  1 = 1
      and cd$entity.name = :cd$entity.name
                """, viewResult = ${entity.name}PesquisaView.class)
  @Override
  public Page<${entity.name}PesquisaView> search(Map<String, Object> parameters, Pageable pageable);

#end
  @Override
  @Query(value = """
          select e
          from ${entity.name} e
          where e.cd$entity.name = ?1
      """)
  public Optional<${entity.name}Entity> findById(Integer cd${entity.name});
}
